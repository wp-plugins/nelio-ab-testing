NelioAB={};NelioABBasic=(typeof NelioABBasic=="undefined")?{hasExpsRunning:false}:NelioABBasic;NelioAB.version=NelioABParams.version;NelioABEnv=false;NelioAB.backend={};NelioAB.backend.url="//"+NelioABParams.backend.domain+"/v"+NelioABParams.backend.version;if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}NelioAB.jquery={};NelioAB.jquery.extend=function(){jQuery.fn.extend({getFullPath:function(){var e="";var d=this;while(!d.is("html")){var c=d.get(0);var b=c.nodeName.toLowerCase();var g=d.attr("id");var a=d.attr("class");if(!d.is("body")){if(typeof g!="undefined"&&g.length>0){b+="#"+g}if(typeof a!="undefined"){a=jQuery.trim(a);if(a.length>0){b+="."+a.split(/[\s\n]+/).join(".")}}}var f=d.parent().children(b);if(f.length>1){b+=":eq("+f.index(c)+")"}e=">"+b+e;d=d.parent()}return"html"+e}})};NelioAB.jquery.extend();NelioAB.helpers={};NelioAB.helpers.isOldIE=function(){if(navigator.appName=="Microsoft Internet Explorer"&&window.XDomainRequest){return true}else{return false}};NelioAB.helpers.remotePost=function(a){a.type="POST";if(NelioAB.helpers.isOldIE()){a.data={data:jQuery.param(a.data),originalRequestUrl:a.url};a.url=NelioABParams.ieUrl}jQuery.ajax(a)};NelioAB.helpers.isAltLoadingRequired=function(){if(NelioABBasic.settings.consistency){return true}if("*"==NelioABEnv.tids[0]){return true}for(var a=0;a<NelioABEnv.tids.length;++a){if(NelioABParams.info.currentId==NelioABEnv.tids[a]){return true}}return false};NelioAB.helpers.isNavigationRelevant=function(){if(NelioABEnv.rids.length>0&&"*"==NelioABEnv.rids[0]){return true}for(var a=0;a<NelioABEnv.rids.length;++a){if(NelioABEnv.rids[a]==NelioABParams.info.currentId){return true}}for(var a=0;a<NelioABEnv.goals.regularNavigationIds.length;++a){if(NelioABEnv.goals.regularNavigationIds[a]==NelioABParams.info.currentId){return true}}return false};NelioAB.helpers.hideBody=function(){NelioAB.checker.styleNode=document.createElement("style");NelioAB.checker.styleNode.setAttribute("type","text/css");var b="html{display:none !important;} body{display:none !important;}";if(NelioAB.checker.styleNode.styleSheet){NelioAB.checker.styleNode.styleSheet.cssText=""}else{var a=document.createTextNode(b);NelioAB.checker.styleNode.appendChild(a)}document.getElementsByTagName("head")[0].appendChild(NelioAB.checker.styleNode)};NelioAB.helpers.showBody=function(){try{document.getElementsByTagName("head")[0].removeChild(NelioAB.checker.styleNode);jQuery.holdReady(false)}catch(a){}};NelioAB.helpers.extractGetParams=function(d){var f=[];if(d.length==0){return f}var a,c=/\+/g,b=/([^&=]+)=?([^&]*)/g,e=function(g){return decodeURIComponent(g.replace(c," "))},d=d.substring(1);while(a=b.exec(d)){f.push([e(a[1]),e(a[2])])}return f};NelioAB.helpers.mergeUrlParams=function(k,f){var l=[];a=f.indexOf("?");if(-1!=a){l=NelioAB.helpers.extractGetParams(f.substring(a))}var c=[];a=k.indexOf("?");if(-1!=a){c=NelioAB.helpers.extractGetParams(k.substring(a));k=k.substring(0,a)}var g=[];for(var e=0;e<c.length;++e){g.push(c[e])}for(var e=0;e<l.length;++e){var h=true;for(var d=0;d<c.length;++d){if(l[e][0]==c[d][0]){h=false;break}}if(h){g.push(l[e])}}var b="";if(g.length>0){b="?"+g[0][0];var a="="+encodeURIComponent(g[0][1]);if(a.length>1){b+=a}}for(var e=1;e<g.length;++e){b+="&"+g[e][0];var a="="+encodeURIComponent(g[e][1]);if(a.length>1){b+=a}}k+=b;return k};NelioAB.helpers.addHiddenFormFieldsOnSubmission=function(){var a=function(c){if(c.length==0){return}if(typeof c.data("has_nelioab_fields")=="undefined"){var b=NelioAB.checker.generateAjaxParams();$field=jQuery('<input type="hidden" name="nelioab_form_env" />');$field.attr("value",encodeURIComponent(JSON.stringify(b.nelioab_env).replace(/'/g,"%27")));c.append($field);$field=jQuery('<input type="hidden" name="nelioab_current_id" />');$field.attr("value",NelioABParams.info.currentId);c.append($field);$field=jQuery('<input type="hidden" name="nelioab_current_actual_id" />');$field.attr("value",NelioABParams.info.currentActualId);c.append($field);$field=jQuery('<input type="hidden" name="nelioab_userid" />');$field.attr("value",NelioAB.user.id());c.append($field);c.data("has_nelioab_fields","yes")}};jQuery(document).on("click",function(b){if(typeof b.target=="undefined"){return}a(jQuery(b.target).closest("form"))});jQuery(document).on("onkeyup",function(b){if(typeof b.target=="undefined"){return}if(13!=b.keyCode){return}a(jQuery(b.target).closest("form"))})};NelioAB.helpers.prepareOutwardsNavigationTracking=function(){var a=NelioABEnv.goals.outwardsNavigationUrls.ae_hrefs;var c=[];for(var b=0;b<NelioABEnv.goals.outwardsNavigationUrls.regex_hrefs.length;++b){c[b]=new RegExp(NelioABEnv.goals.outwardsNavigationUrls.regex_hrefs[b])}if(a.length>0){jQuery(document).on("byebye",function(f,e,d){d=d.replace(/\/+$/,"");d=d.replace(/^https?:\/\//,"http://");for(b=0;b<a.length;++b){if(c[b].test(d)){if(NelioABParams.misc.useOutwardsNavigationsBlank){e.attr("target","_blank")}NelioAB.helpers.navigateOutwards(a[b])}}})}};NelioAB.helpers.prepareClickOnElementTracking=function(){jQuery(document).click(function(k){var l=jQuery(k.target);var h=false;var a=5;for(var g=0;g<NelioABEnv.goals.clickableElements.length;++g){var b=NelioABEnv.goals.clickableElements[g];switch(b.mode){case"id":var c=l;for(var d=0;d<a;++d){if(typeof c=="undefined"){break}if(c.attr("id")==b.value){h=true;NelioAB.helpers.sendClickElementEvent(b);break}c=l.parent()}break;case"css-path":var c=jQuery(b.value);var n=false;c.each(function(){if(jQuery(this)[0]==l[0]){n=true}});if(n){h=true;NelioAB.helpers.sendClickElementEvent(b)}break;case"text-is":var m=b.value.trim().toLowerCase();var c=l;for(var d=0;d<a;++d){if(typeof c=="undefined"){break}var f=c.text().replace(/\n/g," ").replace(/\s+/g," ").trim().toLowerCase();if(f==m){h=true;NelioAB.helpers.sendClickElementEvent(b);break}c=l.parent()}break}}})};NelioAB.helpers.prepareNavObject=function(){var a={siteId:NelioABParams.site,customerId:NelioABParams.customer,user:NelioAB.user.id(),session:NelioAB.user.session()};a.activeCSS=NelioAB.user.getGlobalAltValue("css");a.activeMenu=NelioAB.user.getGlobalAltValue("menu");a.activeTheme=NelioAB.user.getGlobalAltValue("theme");a.activeWidget=NelioAB.user.getGlobalAltValue("widget");return a};NelioAB.helpers.navigate=function(){var a=NelioAB.helpers.referer;var b=NelioAB.helpers.prepareNavObject();b.referer=document.referrer;b.origin=a.id;b.actualOrigin=a.actualId;b.destination=NelioABParams.info.currentId;b.actualDestination=NelioABParams.info.currentActualId;b.envHash=NelioABBasic.settings.envHash;NelioAB.helpers.remotePost({async:true,url:NelioAB.backend.url+"/rn",data:b})};NelioAB.helpers.navigateOutwards=function(a){var c=NelioAB.helpers.prepareNavObject();c.referer=document.URL;c.origin=NelioABParams.info.currentId;c.actualOrigin=NelioABParams.info.currentActualId;c.destination=a;c.actualDestination=a;c.envHash=NelioABBasic.settings.envHash;var b=NelioABParams.misc.useOutwardsNavigationsBlank;NelioAB.helpers.remotePost({async:b,url:NelioAB.backend.url+"/on",data:c})};NelioAB.helpers.sendNewHeadlineViews=function(){if(NelioABParams.sync.headlines.length>0){NelioAB.helpers.sendHeadlineViews()}};NelioAB.helpers.sendHeadlineViews=function(){var a={siteId:NelioABParams.site,customerId:NelioABParams.customer,user:NelioAB.user.id(),headlines:NelioABParams.sync.headlines,envHash:NelioABBasic.settings.envHash};NelioAB.helpers.remotePost({async:true,url:NelioAB.backend.url+"/hl",data:a})};NelioAB.helpers.sendClickElementEvent=function(b){var a={siteId:NelioABParams.site,customerId:NelioABParams.customer,eventId:b.id,user:NelioAB.user.id(),page:NelioABParams.info.currentId,actualPage:NelioABParams.info.currentActualId,envHash:NelioABBasic.settings.envHash};a.activeCSS=NelioAB.user.getGlobalAltValue("css");a.activeMenu=NelioAB.user.getGlobalAltValue("menu");a.activeTheme=NelioAB.user.getGlobalAltValue("theme");a.activeWidget=NelioAB.user.getGlobalAltValue("widget");NelioAB.helpers.remotePost({async:true,url:NelioAB.backend.url+"/ce",data:a})};NelioAB.helpers.track=function(){if(NelioAB.helpers.isNavigationRelevant()){NelioAB.helpers.navigate()}jQuery(document).ready(function(){if("DONT_TRACK_HEATMAPS"!=NelioABBasic.settings.hmMode){NelioAB.heatmaps.track()}if(NelioABParams.sync.headlines.length>0){NelioAB.helpers.sendHeadlineViews()}NelioAB.helpers.prepareOutwardsNavigationTracking();NelioAB.helpers.prepareClickOnElementTracking();NelioAB.helpers.addHiddenFormFieldsOnSubmission()})};NelioAB.helpers.selectAltRandomly=function(c){var l=c.alts;var e=c.winner;var b=l.length;var a=undefined;var h=NelioABBasic.settings.algorithm;if("p"==h){var k=l[0];var g=NelioABBasic.settings.oriPrio;var j=Math.floor(Math.random()*101);if(j<=g){for(i=0;i<l.length;++i){if(l[i]==k){return i}}}--b;a=k}else{if("g"==h){if(typeof e!="undefined"&&e.length>0){var d=NelioABBasic.settings.exploitPerc;var j=Math.floor(Math.random()*101);if(j<=d){for(i=0;i<l.length;++i){if(l[i]==e){return i}}}--b;a=e}}else{}}var f=Math.floor(Math.random()*b);if(l[f]==a){f=b}return f};NelioAB.helpers.setRefererCookie=function(){var c=";expires="+NelioAB.cookies.EXPIRES_IN_TWO_MINUTES+";path=/";try{var a=NelioABParams.info.currentId+":"+NelioABParams.info.currentActualId;document.cookie="nelioab_referer_ids="+a+c}catch(b){console.error("Unable to set referer cookie")}};NelioAB.helpers.referer=false;NelioAB.helpers.updateRefererInformation=function(a){var c={id:-102,actualId:-102};if(!NelioAB.helpers.referer){try{if(window.history.state!=null&&typeof window.history.state.referer!="undefined"){c=window.history.state.referer}else{var b=NelioAB.cookies.get("nelioab_referer_ids");b=b.split(":");c={id:b[0],actualId:b[1]}}}catch(d){}}else{c=NelioAB.helpers.referer}if(typeof a=="undefined"){a=document.URL}NelioAB.helpers.referer=c;try{window.history.replaceState({referer:c},"",a)}catch(d){}};NelioAB.helpers.processAjaxResult=function(a){if(typeof a=="undefined"||typeof a.nelioab=="undefined"){return}if(typeof a.nelioab.headlines!="undefined"){NelioABParams.sync.headlines=a.nelioab.headlines}NelioAB.helpers.sendNewHeadlineViews()};NelioAB.helpers.getRegularCookiePrefix=function(){return"nelioab_altexp_"};NelioAB.helpers.getGlobalCookiePrefix=function(a){if("css"==a||"c"==a){return"nelioab_cglobal_altexp_"}if("menu"==a||"m"==a){return"nelioab_mglobal_altexp_"}if("theme"==a||"t"==a){return"nelioab_tglobal_altexp_"}if("widget"==a||"w"==a){return"nelioab_wglobal_altexp_"}return""};NelioAB.helpers.addDocumentHooks=function(){jQuery(document).click(function(c){NelioAB.helpers.setRefererCookie();var b;var a;b=jQuery(c.target).closest("a");a=undefined;try{a=b.attr("href")}catch(c){}if(a!=undefined){c.type="byebye";jQuery(document).trigger(c,[b,a]);return}b=jQuery(c.target).closest("area");a=undefined;try{a=b.attr("href")}catch(c){}if(a!=undefined){c.type="byebye";jQuery(document).trigger(c,[b,a]);return}});jQuery(document).on("submit","form",function(a){a.type="byebye";jQuery(document).trigger(a,[jQuery(this),jQuery(this).attr("action")])});window.onbeforeunload=window.onunload=function(){NelioAB.helpers.setRefererCookie()}};NelioAB.cookies={};NelioAB.cookies.isABCookieName=function(a){return(a.indexOf("nelioab_")==0&&a.indexOf("_altexp")>0)};NelioAB.cookies.now=new Date().getTime();NelioAB.cookies.EXPIRES_IN_TWO_MINUTES=new Date();NelioAB.cookies.EXPIRES_IN_TWO_MINUTES.setTime(NelioAB.cookies.now+1000*60*2);NelioAB.cookies.EXPIRES_IN_TWO_MINUTES=NelioAB.cookies.EXPIRES_IN_TWO_MINUTES.toUTCString();NelioAB.cookies.EXPIRES_IN_THREE_MONTHS=new Date();NelioAB.cookies.EXPIRES_IN_THREE_MONTHS.setTime(NelioAB.cookies.now+1000*60*60*24*90);NelioAB.cookies.EXPIRES_IN_THREE_MONTHS=NelioAB.cookies.EXPIRES_IN_THREE_MONTHS.toUTCString();NelioAB.cookies.EXPIRES_IN_TEN_YEARS=new Date();NelioAB.cookies.EXPIRES_IN_TEN_YEARS.setTime(NelioAB.cookies.now+1000*60*60*24*365);NelioAB.cookies.EXPIRES_IN_TEN_YEARS=NelioAB.cookies.EXPIRES_IN_TEN_YEARS.toUTCString();NelioAB.cookies.get=function(c){var a=document.cookie.split(";");for(var e=0;e<=a.length;++e){var d=a[e];if(undefined==d){continue}var f=d.substr(0,d.indexOf("=")).trim();var b=d.substr(d.indexOf("=")+1,d.length).trim();if(f==c){return b}}return undefined};NelioAB.cookies.getFuzzy=function(c){var a=document.cookie.split(";");for(var e=0;e<=a.length;++e){var d=a[e];if(undefined==d){continue}var f=d.substr(0,d.indexOf("=")).trim();var b=d.substr(d.indexOf("=")+1,d.length).trim();if(f.indexOf(c)==0){return b}}return""};NelioAB.cookies.clean=function(){var a=document.cookie.split(";");for(var c=0;c<=a.length;++c){var b=a[c];if(b==undefined){continue}var d=b.substr(0,b.indexOf("=")).trim();if(d.indexOf("nelioab_")==0){if(d.indexOf("userid")==-1){NelioAB.cookies.remove(d)}}}};NelioAB.cookies.remove=function(a){var b=new Date(1985,1,1);document.cookie=a+"=1;path=/;expires="+b.toUTCString()};NelioAB.user={};NelioAB.user.canInfoBeSaved=function(){document.cookie="__verify=1;path=/";var a=document.cookie.length>1&&document.cookie.indexOf("__verify=1")>-1;NelioAB.cookies.remove("__verify");return a};NelioAB.user.loadEnvironment=function(c){var b="expires="+NelioAB.cookies.EXPIRES_IN_TEN_YEARS;var l=false;for(var e=0;e<c.length&&!l;++e){if(NelioAB.checker.nabPrefix==c[e][0]){l=c[e][1]}}if(l){for(var e=0;e<NelioABBasic.envs.length;++e){var k=NelioABBasic.envs[e];for(var d=0;d<k.ab.length&&!NelioABEnv;++d){var g=k.ab[d].alts[0];if(typeof k.ab[d].pid!="undefined"){g=k.ab[d].pid}if(NelioABParams.info.currentId==g){NelioABEnv=k}}}if(NelioABEnv){var f=NelioAB.cookies.get("nelioab_env");var a=f!=NelioABEnv.id;if(a){NelioAB.cookies.remove("nelioab_userid");NelioAB.cookies.remove("nelioab_session");NelioAB.user.id();document.cookie="nelioab_env="+NelioABEnv.id+"; "+b+"; path=/"}}}if(!NelioABEnv){var f=NelioAB.cookies.get("nelioab_env");for(var e=0;e<NelioABBasic.envs.length&&!NelioABEnv;++e){if(NelioABBasic.envs[e].id==f){NelioABEnv=NelioABBasic.envs[e]}}if(!NelioABEnv){var h=-1;if(NelioABBasic.envs.length>0){h=Math.floor(Math.random()*NelioABBasic.envs.length);NelioABEnv=NelioABBasic.envs[h];f=NelioABBasic.envs[h].id;document.cookie="nelioab_env="+f+"; "+b+"; path=/"}}}};NelioAB.user.id=function(){var b=NelioAB.cookies.get("nelioab_userid");if(typeof b=="undefined"){var c;if(typeof performance!="undefined"&&typeof performance.now=="function"){c=performance.now()}else{if(typeof Date!="undefined"&&typeof Date().now=="function"){c=Date().now()}else{c=new Date().getTime()}}b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=(c+Math.random()*16)%16|0;c=Math.floor(c/16);return(e=="x"?d:(d&3|8)).toString(16)});var a="expires="+NelioAB.cookies.EXPIRES_IN_TEN_YEARS;document.cookie="nelioab_userid="+b+"; "+a+"; path=/"}return b};NelioAB.user.session=function(){var a=NelioAB.cookies.get("nelioab_session");if(typeof a=="undefined"){var b;if(typeof performance!="undefined"&&typeof performance.now=="function"){b=performance.now()}else{if(typeof Date!="undefined"&&typeof Date().now=="function"){b=Date().now()}else{b=new Date().getTime()}}a=NelioAB.user.id()+"-"+b;document.cookie="nelioab_session="+a+"; path=/"}return a};NelioAB.user.participates=function(){var d=NelioAB.cookies.get("nelioab_is_in");if(typeof d=="undefined"){d="no";var b="expires="+NelioAB.cookies.EXPIRES_IN_TEN_YEARS;var f="true";var g=NelioABBasic.settings.partChance;try{var a=NelioAB.cookies.get("nelioab_was_in").split(":");f=a[0];g=a[1];d=f;if(g!=NelioABBasic.settings.partChance){throw 0}}catch(c){var a=Math.floor((Math.random()*101));if(a<=NelioABBasic.settings.partChance){d="yes"}else{d="no"}document.cookie="nelioab_was_in="+d+":"+NelioABBasic.settings.partChance+";"+b+";path=/"}document.cookie="nelioab_is_in="+d+";path=/"}return("yes"==d)};NelioAB.user.getAlt=function(e){var d=false;var a=e;if(a.indexOf("nelioab_")!=0){a=NelioAB.helpers.getRegularCookiePrefix()+e}for(var b=0;b<NelioABEnv.ab.length&&!d;++b){if(a==NelioABEnv.ab[b].name){d=NelioABEnv.ab[b]}}if(d){var c=NelioAB.cookies.get(a);if(c<d.alts.length){return c}}return 0};NelioAB.user.getGlobalAlt=function(c){var b=NelioAB.helpers.getGlobalCookiePrefix(c);var a=NelioAB.cookies.getFuzzy(b);if(a<0||a>100){return"0"}else{return a}};NelioAB.user.getGlobalAltValue=function(d){var f=false;var e="";if(d){var b=NelioAB.helpers.getGlobalCookiePrefix(d);for(var c=0;c<NelioABEnv.ab.length&&!f;++c){if(NelioABEnv.ab[c].name.indexOf(b)==0){f=NelioABEnv.ab[c]}}if(f){var a=NelioAB.user.getGlobalAlt(d);if(a<f.alts.length){e=""+f.alts[a]}}}return e};NelioAB.user.loadEnvironmentAndSetAlternatives=function(h){var s=";expires="+NelioAB.cookies.EXPIRES_IN_THREE_MONTHS+";path=/";NelioAB.user.loadEnvironment(h);var r=document.cookie.split(";");for(var o=0;o<=r.length;++o){var d=r[o];if(d==undefined){continue}var a=d.substr(0,d.indexOf("=")).trim();var b=false;if(NelioAB.cookies.isABCookieName(a)){b=true}for(var j=0;j<NelioABEnv.ab.length&&b;++j){if(a==NelioABEnv.ab[j].name){b=false}}if(b){NelioAB.cookies.remove(a)}}if(h.length>0){var q=false;var n=[];for(var j=0;j<h.length;++j){if(NelioAB.checker.nabPrefix==h[j][0]){q=h[j][1]}if(NelioAB.checker.nabPrefix+"c"==h[j][0]){n.push(["c",h[j][1]])}if(NelioAB.checker.nabPrefix+"m"==h[j][0]){n.push(["m",h[j][1]])}if(NelioAB.checker.nabPrefix+"t"==h[j][0]){n.push(["t",h[j][1]])}if(NelioAB.checker.nabPrefix+"w"==h[j][0]){n.push(["w",h[j][1]])}}if(q){var f=false;for(var j=0;j<NelioABEnv.ab.length&&!f;++j){var k=NelioABEnv.ab[j].alts[0];if(typeof NelioABEnv.ab[j].pid!="undefined"){k=NelioABEnv.ab[j].pid}if(NelioABParams.info.currentId==k){f=NelioABEnv.ab[j]}}if(f){if(q<f.alts.length){document.cookie=f.name+"="+q+s}}}for(var l=0;l<n.length;++l){var m=n[l][0];var p=n[l][1];var f=false;for(var j=0;j<NelioABEnv.ab.length&&!f;++j){if(NelioABEnv.ab[j].name.indexOf(NelioAB.helpers.getGlobalCookiePrefix(m))==0){f=NelioABEnv.ab[j]}}if(f){if(p<f.alts.length){document.cookie=f.name+"="+p+s}}}}for(var j=0;j<NelioABEnv.ab.length;++j){var f=NelioABEnv.ab[j];if(typeof NelioAB.cookies.get(f.name)=="undefined"){var e=NelioAB.helpers.selectAltRandomly(f);document.cookie=f.name+"="+e+s}}};NelioAB.user.overwriteAlternatives=function(b){var a=";expires="+NelioAB.cookies.EXPIRES_IN_THREE_MONTHS+";path=/"};NelioAB.heatmaps={};NelioAB.heatmaps.current={};NelioAB.heatmaps.current.regular;NelioAB.heatmaps.current.click;NelioAB.heatmaps.phone={};NelioAB.heatmaps.phone.regular;NelioAB.heatmaps.phone.click;NelioAB.heatmaps.tablet={};NelioAB.heatmaps.tablet.regular;NelioAB.heatmaps.tablet.click;NelioAB.heatmaps.desktop={};NelioAB.heatmaps.desktop.regular;NelioAB.heatmaps.desktop.click;NelioAB.heatmaps.hd={};NelioAB.heatmaps.hd.regular;NelioAB.heatmaps.hd.click;(function(){NelioAB.heatmaps.HeatmapData=function(){this.data={};this.max=0};NelioAB.heatmaps.HeatmapDataForElement=function(){this.data=[];this.max=0};NelioAB.heatmaps.HeatmapData.prototype={addDataPoint:function(c,a,e){if(typeof a=="undefined"||a<0||typeof e=="undefined"||e<0){return}if(0===c){return}var b=this.data;var d=false;if(typeof b[c]!="undefined"){d=b[c]}if(!d){d=new NelioAB.heatmaps.HeatmapDataForElement();this.data[c]=d}d.addDataPoint(a,e);if(this.max<d.max){this.max=d.max}},exportDataSet:function(){var c=this.data;var b={};for(var a in this.data){b[a]=c[a].exportDataSet()}return{max:this.max,data:b,session:NelioAB.user.session()}}};NelioAB.heatmaps.HeatmapDataForElement.prototype={addDataPoint:function(a,c){var b=this.data;if(!b[a]){b[a]=[]}if(!b[a][c]){b[a][c]=0}b[a][c]+=1;if(this.max<b[a][c]){this.max=b[a][c]}},exportDataSet:function(){var d=this.data;var b=[];for(var c in d){if(typeof c=="undefined"||!d.hasOwnProperty(c)){continue}for(var a in d[c]){if(typeof a=="undefined"||!d[c].hasOwnProperty(a)){continue}b.push({x:c,y:a,count:d[c][a]})}}return{max:this.max,data:b}}};NelioAB.heatmaps.phone.regular=new NelioAB.heatmaps.HeatmapData();NelioAB.heatmaps.tablet.regular=new NelioAB.heatmaps.HeatmapData();NelioAB.heatmaps.desktop.regular=new NelioAB.heatmaps.HeatmapData();NelioAB.heatmaps.hd.regular=new NelioAB.heatmaps.HeatmapData();NelioAB.heatmaps.phone.click=new NelioAB.heatmaps.HeatmapData();NelioAB.heatmaps.tablet.click=new NelioAB.heatmaps.HeatmapData();NelioAB.heatmaps.desktop.click=new NelioAB.heatmaps.HeatmapData();NelioAB.heatmaps.hd.click=new NelioAB.heatmaps.HeatmapData()})();NelioAB.heatmaps.selectRegularDatastore=function(a){if(a<=360){return NelioAB.heatmaps.phone.regular}else{if(a<=768){return NelioAB.heatmaps.tablet.regular}else{if(a<=1024){return NelioAB.heatmaps.desktop.regular}else{return NelioAB.heatmaps.hd.regular}}}};NelioAB.heatmaps.selectClickDatastore=function(a){if(a<=360){return NelioAB.heatmaps.phone.click}else{if(a<=768){return NelioAB.heatmaps.tablet.click}else{if(a<=1024){return NelioAB.heatmaps.desktop.click}else{return NelioAB.heatmaps.hd.click}}}};NelioAB.heatmaps.doTrack=function(g){NelioAB.heatmaps.current.regular=NelioAB.heatmaps.selectRegularDatastore(jQuery(window).width());NelioAB.heatmaps.current.click=NelioAB.heatmaps.selectClickDatastore(jQuery(window).width());var h=jQuery(document);var b=true,d=false,p=true,j=false,o=0,i=0,f=0,m=false,l=false,e=false,k=false;setInterval(function(){if(!l){b=true}},80);var c=setInterval(function(){if(j&&p&&!m&&!l&&!e){m=setInterval(function(){NelioAB.heatmaps.current.regular.addDataPoint(o,i,f)},1000);k=setTimeout(function(){if(m&&!l){clearInterval(m);m=false;l=true}},10000)}},150);var n;if("html"==g){o="html>body";n=function(t,r){if(typeof t.pageX=="undefined"||typeof t.pageY=="undefined"){return}var s=jQuery("body").width();var q=jQuery("body").height();var v=t.pageX;var u=Math.floor(t.pageY/40)*40+20;if(u>q){u=Math.floor((q-20)/40)*40+20}i=a(v,s);f=parseFloat(u/q).toFixed(5);if(r){NelioAB.heatmaps.current.click.addDataPoint(o,i,f)}NelioAB.heatmaps.current.regular.addDataPoint(o,i,f)}}else{n=function(w,t){if(typeof w.pageX=="undefined"||typeof w.pageY=="undefined"){return}var x=jQuery(w.target);try{o=x.getFullPath()}catch(w){NelioAB.jquery.extend();return}var v=x.css("padding-left");if(typeof v=="undefined"){v="0"}var s=x.css("padding-right");if(typeof s=="undefined"){s="0"}var A=x.css("padding-top");if(typeof A=="undefined"){A="0"}var y=x.css("padding-bottom");if(typeof y=="undefined"){y="0"}v=Math.round(v.replace(/[^0-9\.]/g,""));s=Math.round(s.replace(/[^0-9\.]/g,""));A=Math.round(A.replace(/[^0-9\.]/g,""));y=Math.round(y.replace(/[^0-9\.]/g,""));var u=x.width()+v+s;var z=x.height()+A+y;var r=w.pageX-x.offset().left-v;var q=w.pageY-x.offset().top-A;i=a(r,u);f=a(q,z);if(i==Infinity||i==NaN){i="0"}if(f==Infinity||f==NaN){f="0"}if(t){NelioAB.heatmaps.current.click.addDataPoint(o,i,f)}NelioAB.heatmaps.current.regular.addDataPoint(o,i,f)}}var a=function(r,s){if(s<=50){return"0.5"}if(s<=500){var q=(r/s).toFixed(1);if(s<=150){if(q=="0.0"||q=="0.1"||q=="0.2"||q=="0.3"){return"0.2"}else{if(q=="0.4"||q=="0.5"||q=="0.6"){return"0.5"}else{return"0.8"}}}return q}var q=(r/s).toFixed(3);var t=parseInt(q.substring(3,4));if(s<=800){if(t<=5){t="5"}else{t=""}return q.substring(0,3)+t}else{if(s<=1500){if(t==0){t=""}else{if(t<=2){t="2"}else{if(t<=5){t="5"}else{if(t<=7){t="7"}else{t="9"}}}}return q.substring(0,3)+t}else{if(s<=5000){return q.replace(/0?.$/,"")}else{return q.replace(/0+$/,"")}}}};h.mousemove(function(q){if(e){return}j=true;if(m){clearInterval(m);m=false}if(k){clearTimeout(k);l=false}if(b&&p){n(q,false);b=false}});h.click(function(q){j=true;if(m){clearInterval(m);m=false}if(k){clearTimeout(k);l=false}if(!e){n(q,true)}});h.mouseleave(function(){j=false});h.mouseenter(function(){j=true});jQuery("body").bind("touchstart",function(s){e=true;var r=s.originalEvent.touches;for(var q=0;q<r.length;q++){n(r[q],true)}});jQuery(window).focus(function(){p=true});jQuery(window).blur(function(){p=false;if(m){clearInterval(m);m=false}if(k){clearTimeout(k);l=false}});jQuery(document).bind("byebye",function(s,r,q){if(q instanceof String&&q.indexOf("#")==0){return}n(s,true);NelioAB.heatmaps.sync(true)});window.onunload=window.onbeforeunload=(function(){NelioAB.helpers.setRefererCookie();NelioAB.heatmaps.sync(true)});jQuery(window).resize(function(q){NelioAB.heatmaps.current.regular=NelioAB.heatmaps.selectRegularDatastore(jQuery(window).width());NelioAB.heatmaps.current.click=NelioAB.heatmaps.selectClickDatastore(jQuery(window).width())})};NelioAB.heatmaps.syncInterval=1000;NelioAB.heatmaps.scheduleNextSync=function(){setTimeout(function(){NelioAB.heatmaps.sync(false)},NelioAB.heatmaps.syncInterval);if(NelioAB.heatmaps.syncInterval<=60000){NelioAB.heatmaps.syncInterval+=5000}};NelioAB.heatmaps.doSync=function(b){var a=NelioABParams.misc.useOutwardsNavigationsBlank;b.envHash=NelioABBasic.settings.envHash;NelioAB.helpers.remotePost({async:a,url:NelioAB.backend.url+"/hm",data:b})};NelioAB.heatmaps.isSyncing=false;NelioAB.heatmaps.sync=function(j){if(NelioAB.heatmaps.isSyncing){return}if(j){NelioAB.heatmaps.isSyncing=true}var h=NelioAB.heatmaps.phone.regular;NelioAB.heatmaps.phone.regular=new NelioAB.heatmaps.HeatmapData();var d=NelioAB.heatmaps.tablet.regular;NelioAB.heatmaps.tablet.regular=new NelioAB.heatmaps.HeatmapData();var a=NelioAB.heatmaps.desktop.regular;NelioAB.heatmaps.desktop.regular=new NelioAB.heatmaps.HeatmapData();var g=NelioAB.heatmaps.hd.regular;NelioAB.heatmaps.hd.regular=new NelioAB.heatmaps.HeatmapData();var e=NelioAB.heatmaps.phone.click;NelioAB.heatmaps.phone.click=new NelioAB.heatmaps.HeatmapData();var f=NelioAB.heatmaps.tablet.click;NelioAB.heatmaps.tablet.click=new NelioAB.heatmaps.HeatmapData();var b=NelioAB.heatmaps.desktop.click;NelioAB.heatmaps.desktop.click=new NelioAB.heatmaps.HeatmapData();var i=NelioAB.heatmaps.hd.click;NelioAB.heatmaps.hd.click=new NelioAB.heatmaps.HeatmapData();NelioAB.heatmaps.current.regular=NelioAB.heatmaps.selectRegularDatastore(jQuery(window).width());NelioAB.heatmaps.current.click=NelioAB.heatmaps.selectClickDatastore(jQuery(window).width());var c={customerId:NelioABParams.customer,siteId:NelioABParams.site,post:NelioABParams.info.currentActualId,session:NelioAB.user.session()};if(e.max>0){c.resolution="phone";c.isClick=true;c.value=JSON.stringify(e.exportDataSet());NelioAB.heatmaps.doSync(c)}if(f.max>0){c.resolution="tablet";c.isClick=true;c.value=JSON.stringify(f.exportDataSet());NelioAB.heatmaps.doSync(c)}if(b.max>0){c.resolution="desktop";c.isClick=true;c.value=JSON.stringify(b.exportDataSet());NelioAB.heatmaps.doSync(c)}if(i.max>0){c.resolution="hd";c.isClick=true;c.value=JSON.stringify(i.exportDataSet());NelioAB.heatmaps.doSync(c)}if(h.max>0){c.resolution="phone";c.isClick=false;c.value=JSON.stringify(h.exportDataSet());NelioAB.heatmaps.doSync(c)}if(d.max>0){c.resolution="tablet";c.isClick=false;c.value=JSON.stringify(d.exportDataSet());NelioAB.heatmaps.doSync(c)}if(a.max>0){c.resolution="desktop";c.isClick=false;c.value=JSON.stringify(a.exportDataSet());NelioAB.heatmaps.doSync(c)}if(g.max>0){c.resolution="hd";c.isClick=false;c.value=JSON.stringify(g.exportDataSet());NelioAB.heatmaps.doSync(c)}if(!j){NelioAB.heatmaps.scheduleNextSync()}};NelioAB.heatmaps.track=function(){var b=false;for(var a=0;a<NelioABBasic.hm.length&&!b;++a){if(NelioABBasic.hm[a]==NelioABParams.info.currentActualId){b=true}}for(var a=0;a<NelioABEnv.hm.length&&!b;++a){if(NelioABEnv.hm[a]==NelioABParams.info.currentActualId){b=true}}if(b){NelioAB.heatmaps.doTrack(NelioABBasic.settings.hmMode);NelioAB.heatmaps.scheduleNextSync()}};NelioAB.checker={};NelioAB.checker.styleNode;NelioAB.checker.nabPrefix="nab";NelioAB.checker.nabMatcher=/^nab[cmtwe]?$/;NelioAB.checker.init=function(){if(!NelioABBasic.hasExpsRunning||!NelioABBasic.hasQuota||!NelioAB.user.canInfoBeSaved()||!NelioAB.user.participates()){return}jQuery.holdReady(true);try{console.log("Checking...");var b=NelioAB.checker.assignAlternativesAndCheck();if(b){console.log("Loading...");NelioAB.checker.loadAlternative()}else{NelioAB.checker.cleanUrl();NelioAB.helpers.showBody();NelioAB.helpers.addDocumentHooks();NelioAB.helpers.track();console.log("Done!")}}catch(a){NelioAB.helpers.showBody();console.warn("Oops! "+a.stack)}};NelioAB.checker.assignAlternativesAndCheck=function(){var a=false;NelioAB.helpers.hideBody();var n=[];var b=document.URL.indexOf("?");if(-1!=b){n=NelioAB.helpers.extractGetParams(document.URL.substring(b))}var b=[];for(var g=0;g<n.length;++g){if(NelioAB.checker.nabMatcher.test(n[g][0])){b.push(n[g])}}NelioAB.user.loadEnvironmentAndSetAlternatives(b);a=NelioAB.helpers.isAltLoadingRequired();var h=NelioAB.checker.generateParamsForAltLoading();var l=true;for(var g=0;g<h.length&&l;++g){var o=false;for(var e=0;e<n.length&&!o;++e){var d=h[g][0];var m=h[g][1];if(NelioAB.checker.nabPrefix+"e"==d){m="";var b=h[g][1];for(var c=0;c<b.length;++c){m+=b[c][0]+":"+b[c][1]+","}if(m.length>0){m=m.substring(0,m.length-1)}}if(d==n[e][0]&&m==n[e][1]){o=true}}if(!o){l=false}}var f=false;for(var g=0;g<n.length&&!f;++g){var o=false;if(!NelioAB.checker.nabMatcher.test(n[g][0])){continue}for(var e=0;e<h.length&&!o;++e){if(n[g][0]==h[e][0]){o=true}}if(!o){f=true}}if(l&&!f){a=false}return a};NelioAB.checker.buildUrl=function(d,a,g){d+="?";for(var e=0;e<a.length;++e){var c=a[e][0];var f=a[e][1];if(NelioAB.checker.nabPrefix+"e"==c){d+=NelioAB.checker.nabPrefix+"e=";for(var b=0;b<f.length;++b){d+=f[b][0]+":"+f[b][1]+","}d=d.substring(0,d.length-1);d+="&"}else{var h=""+a[e][1];if(h.length>0){h="="+h}d+=a[e][0]+h+"&"}}for(var e=0;e<g.length;++e){var c=g[e][0];if(!NelioAB.checker.nabMatcher.test(c)){var h=""+g[e][1];if(h.length>0){h="="+h}d+=c+h+"&"}}d=d.substring(0,d.length-1);return d};NelioAB.checker.generateParamsForAltLoading=function(){var b=[];var h=false;for(var d=0;d<NelioABEnv.ab.length&&!f;++d){var c=NelioABEnv.ab[d].alts[0];if(typeof NelioABEnv.ab[d].pid!="undefined"){c=NelioABEnv.ab[d].pid}if(NelioABParams.info.currentId==c){h=NelioABEnv.ab[d]}}if(h){b.push([NelioAB.checker.nabPrefix,NelioAB.user.getAlt(h.name)]);h=h.name}var a;a=NelioAB.user.getGlobalAlt("css");if(a.length>0){b.push([NelioAB.checker.nabPrefix+"c",a])}a=NelioAB.user.getGlobalAlt("menu");if(a.length>0){b.push([NelioAB.checker.nabPrefix+"m",a])}a=NelioAB.user.getGlobalAlt("theme");if(a.length>0){b.push([NelioAB.checker.nabPrefix+"t",a])}a=NelioAB.user.getGlobalAlt("widget");if(a.length>0){b.push([NelioAB.checker.nabPrefix+"w",a])}if(NelioABBasic.settings.consistency||"*"==NelioABEnv.tids[0]||b.length>0){var e=[];for(var d=0;d<NelioABEnv.ab.length;++d){var f=NelioABEnv.ab[d];if(h==f.name){continue}if(f.name.indexOf(NelioAB.helpers.getRegularCookiePrefix())==-1){continue}var g=f.name.replace(NelioAB.helpers.getRegularCookiePrefix(),"");e.push([g,NelioAB.user.getAlt(g)])}if(e.length>0){b.push([NelioAB.checker.nabPrefix+"e",e])}}return b};NelioAB.checker.generateAjaxParams=function(){var g=["css","menu","theme","widget"];var k={nelioab_env:{}};for(var f=0;f<NelioABEnv.ab.length;++f){var d=NelioABEnv.ab[f];var a=d.name;var c=false;var b=false;if(a.indexOf(NelioAB.helpers.getRegularCookiePrefix())==0){b=a.replace(NelioAB.helpers.getRegularCookiePrefix(),"");c=NelioAB.user.getAlt(b)}for(var e=0;e<g.length&&!c;++e){var h=g[e];if(a.indexOf(NelioAB.helpers.getGlobalCookiePrefix(h))==0){c=NelioAB.user.getGlobalAlt(h);b=a.replace(NelioAB.helpers.getGlobalCookiePrefix(h),"")}}if(c!==false){k.nelioab_env[b]=parseInt(c)}}return k};NelioAB.checker.loadAlternative=function(){var a=document.URL;var k=[];var c=a.indexOf("?");if(-1!=c){k=NelioAB.helpers.extractGetParams(a.substring(c))}var f=NelioAB.checker.generateParamsForAltLoading();try{var j="";for(var d=0;d<k.length&&j.length==0;++d){if(k[d][0]=="utm_referrer"){j=k[d][1]}}if(j.length==0){var b=document.referrer;var h=document.URL;b=b.replace(/^https?:\/\//,"");b=b.replace(/\/.*$/,"");h=h.replace(/^https?:\/\//,"");h=h.replace(/\/.*$/,"");if(h!=b){k.push(["utm_referrer",decodeURIComponent(document.referrer)])}}}catch(g){}var c=document.URL.indexOf("?");if(c!=-1){a=a.substring(0,c)}a=NelioAB.checker.buildUrl(a,f,k);window.location.replace(a)};NelioAB.checker.cleanUrl=function(){var b=document.URL;var a=b.indexOf("?");var d=[];if(-1!=a){d=NelioAB.helpers.extractGetParams(b.substring(a));b=b.substring(0,a)}if("all"==NelioABBasic.settings.hideParams){b+="?";for(var c=0;c<d.length;++c){if(NelioAB.checker.nabMatcher.test(d[c][0])){continue}var e=""+d[c][1];if(e.length>0){e="="+e}b+=d[c][0]+e+"&"}b=b.substring(0,b.length-1);NelioAB.helpers.updateRefererInformation(b)}else{if("context"==NelioABBasic.settings.hideParams){b+="?";for(var c=0;c<d.length;++c){if(NelioAB.checker.nabPrefix+"e"==d[c][0]){continue}var e=""+d[c][1];if(e.length>0){e="="+e}b+=d[c][0]+e+"&"}b=b.substring(0,b.length-1);NelioAB.helpers.updateRefererInformation(b)}else{if("none"==NelioABBasic.settings.hideParams){NelioAB.helpers.updateRefererInformation()}}}};NelioAB.checker.init();